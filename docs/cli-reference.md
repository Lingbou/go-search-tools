# Go Search Tools 命令行参考

`gost` 是一个强大的文件搜索工具，支持按文件名和内容搜索。本文档详细介绍了所有可用的命令和参数。

## 目录

- [全局参数](#全局参数)
- [文件名搜索](#文件名搜索)
- [内容搜索](#内容搜索)
- [使用示例](#使用示例)
- [注意事项](#注意事项)

## 全局参数

以下参数适用于所有 `gost` 命令：

| 参数 | 简写 | 默认值 | 描述 |
|------|------|--------|------|
| `--path` | `-p` | `.` | 指定搜索的起始路径 |
| `--ignore-case` | `-i` | `false` | 忽略大小写进行匹配 |
| `--color` | `-c` | `true` | 启用彩色输出，使结果更易读 |
| `--progress` | `-P` | `false` | 显示搜索进度条 |

## 文件名搜索

### 基本用法

`<pattern>` 是文件名匹配模式，支持 `*` 和 `?` 通配符：
- `*` 匹配任意数量的字符
- `?` 匹配单个字符

### 参数

| 参数 | 简写 | 默认值 | 描述 |
|------|------|--------|------|
| `--recursive` | `-r` | `true` | 递归搜索子目录 |
| `--max-depth` | `-d` | `-1` | 最大递归深度，`-1`表示不限制 |
| `--exclude-dir` | `-e` | `[]` | 排除的目录，可多次使用此参数指定多个目录 |
| `--include-ext` | `-I` | `[]` | 只包含指定扩展名的文件，可多次使用此参数指定多个扩展名 |
| `--exclude-ext` | `-E` | `[]` | 排除指定扩展名的文件，可多次使用此参数指定多个扩展名 |

## 内容搜索

### 基本用法

`<pattern>` 是要在文件内容中查找的字符串。

### 参数

| 参数 | 简写 | 默认值 | 描述 |
|------|------|--------|------|
| `--recursive` | `-r` | `true` | 递归搜索子目录 |
| `--max-depth` | `-d` | `-1` | 最大递归深度，`-1`表示不限制 |
| `--exclude-dir` | `-e` | `[]` | 排除的目录，可多次使用此参数指定多个目录 |
| `--include-ext` | `-I` | `[]` | 只包含指定扩展名的文件，可多次使用此参数指定多个扩展名 |
| `--exclude-ext` | `-E` | `[]` | 排除指定扩展名的文件，可多次使用此参数指定多个扩展名 |
| `--workers` | `-w` | `4` | 并行工作线程数，增加此值可提高搜索速度 |
| `--timeout` | `-t` | `0` | 搜索超时时间，例如 `10s`、`2m` 等，`0` 表示不设置超时 |

## 使用示例

### 按文件名搜索

1. 搜索当前目录及其子目录下所有的 Go 文件：
   ```bash
   gost name --include-ext .go "*.go"
   ```

2. 在指定目录递归搜索，但只检查深度不超过3的目录，查找文件名包含 config 的文件：
   ```bash
   gost name --path /指定路径 --max-depth 3 "config.*"
   ```

3. 搜索当前目录下的所有 .txt 和 .md 文件，忽略大小写：
   ```bash
   gost name --include-ext .txt --include-ext .md --ignore-case "readme*"
   ```

### 按文件内容搜索

1. 在当前目录及其子目录中，使用8个线程并行搜索包含 error 字符串的文件，设置搜索超时时间为30秒：
   ```bash
   gost content --workers 8 --timeout 30s "error"
   ```

2. 在指定目录搜索文件内容，排除 node_modules 目录和 .jpg 文件，查找包含 "critical bug" 字符串的文件：
   ```bash
   gost content --path /指定路径 --exclude-dir node_modules --exclude-ext .jpg "critical bug"
   ```

3. 在当前目录中搜索所有 .go 文件中包含 "TODO" 的行，忽略大小写：
   ```bash
   gost content --include-ext .go --ignore-case "todo"
   ```

## 注意事项

1. **大文件处理**：内容搜索默认限制文件大小为 10MB，超过此大小的文件将被跳过。

2. **性能优化**：
   - 对于大型目录，增加 `--workers` 参数值可提高搜索速度
   - 使用 `--include-ext` 和 `--exclude-dir` 可以减少需要搜索的文件数量，提高效率
   - 对于可能耗时较长的搜索，建议设置 `--timeout` 参数

3. **通配符使用**：
   - 文件名搜索中的 `*` 匹配任意数量的字符，`?` 匹配单个字符
   - 内容搜索不支持正则表达式，仅支持简单的字符串匹配

4. **进度显示**：
   - 使用 `--progress` 参数可以显示搜索进度，对于大型目录特别有用
```

## 添加到 README 中的引用

为了让用户更容易找到这个文档，我建议在 README.md 中添加一个引用链接：

```markdown
## 文档

详细的命令行参数说明请参考 [命令行参考文档](docs/cli-reference.md)。
```

这样，用户就可以从 README 直接跳转到详细的命令行参数文档了。

        当前模型请求量过大，请求排队约 1 位，请稍候或切换至其他模型问答体验更流畅。